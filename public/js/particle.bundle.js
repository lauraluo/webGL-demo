/* publish time Tuesday, July 18th, 2017, 6:56:23 PM*/!function e(t,r,n){function o(i,c){if(!r[i]){if(!t[i]){var d="function"==typeof require&&require;if(!c&&d)return d(i,!0);if(a)return a(i,!0);var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}var l=r[i]={exports:{}};t[i][0].call(l.exports,function(e){var r=t[i][1][e];return o(r||e)},l,l.exports,e,t,r,n)}return r[i].exports}for(var a="function"==typeof require&&require,i=0;i<n.length;i++)o(n[i]);return o}({1:[function(e,t,r){"use strict";function n(){l=new THREE.Scene,u=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.1,1e4),s=new THREE.WebGLRenderer,s.setClearColor(0,1),s.setSize(window.innerWidth,window.innerHeight);var e=new THREE.DirectionalLight;e.position.set(1200,1200,1200),l.add(e),u.position.x=0,u.position.y=0,u.position.z=1e3,u.lookAt(l.position),document.body.appendChild(s.domElement),v=new THREE.OrbitControls(u),f=new function(){this.explode=function(){m=!0},this.implode=function(){m=!1},this.scale=.1},c(f),o()}function o(){var e=document.createElement("canvas");e.width=512,e.height=512;var t=e.getContext("2d"),r=new Image;r.src="images/demo2.png",r.onload=function(){t.drawImage(r,0,0);var e=t.getImageData(0,0,512,512),n=math.multiply(math.ones(512,512),"");E=new THREE.Geometry;for(var o=0;o<512;o++)for(var i=0;i<512;i++){n._data[i][o]="rgb("+[e.data[4*o+512*i*4],e.data[4*o+1+512*i*4],e.data[4*o+2+512*i*4]].join(",")+")";var c=e.data[4*i+512*o*4]/2,d=new THREE.Vector3(1*o,c,1*i);E.vertices.push(d)}math.forEach(n,function(e){h.push(new THREE.Color(e))}),E.colors=h,E.applyMatrix((new THREE.Matrix4).makeRotationX(Math.PI/2)),E.applyMatrix((new THREE.Matrix4).makeRotationZ(-Math.PI/2));for(var s=0;s<511;s++)for(var l=0;l<511;l++){var u=l+512*s,f=l+1+512*s,v=l+512*(s+1),p=l+1+512*(s+1),w=new THREE.Face3(u,f,p),m=new THREE.Face3(p,v,u);E.faces.push(w),E.faces.push(m)}E.computeVertexNormals(),E.computeFaceNormals(),E.computeBoundingBox(),a(E)}}function a(e){e.vertices.forEach(function(e){e.velocity=Math.random()});var t=(new THREE.TextureLoader,new THREE.PointsMaterial);t.vertexColors=THREE.VertexColors;var r=new THREE.Points(e,t);r.sortParticles=!0,r.translateX(206),r.translateY(206),l.add(r);for(var n=0;n<e.vertices.length;n++)p.push(new THREE.Vector3(0,0,0)),w.push(0);e.faces.forEach(function(e){var t=e.vertexNormals[0],r=e.vertexNormals[1],n=e.vertexNormals[2];w[e.a]+=1,w[e.b]+=1,w[e.c]+=1,p[e.a].add(t),p[e.b].add(r),p[e.c].add(n)});for(var o=0;o<p.length;o++)p[o].divideScalar(w[o]);d()}function i(e){var t=!0===e?-1:1,r=0;E.vertices.forEach(function(e){e.x+=p[r].x*e.velocity*f.scale*t,e.y+=p[r].y*e.velocity*f.scale*t,e.z+=p[r].z*e.velocity*f.scale*t,r++}),E.verticesNeedUpdate=!0}function c(e){var t=new dat.GUI;t.add(e,"explode"),t.add(e,"implode"),t.add(e,"scale",0,2).step(.01)}function d(){s.render(l,u),v.update(),i(m?!0:!1),requestAnimationFrame(d)}var s,l,u,E,f,v,p=[],w=[],h=[],m=!1;window.onload=n},{}]},{},[1]);